(function(e){e.fn.collection=function(t){var Q={container:'body',allow_up:!0,up:'<a href="#">&#x25B2;</a>',before_up:function(e,t){return!0},after_up:function(e,t){return!0},allow_down:!0,down:'<a href="#">&#x25BC;</a>',before_down:function(e,t){return!0},after_down:function(e,t){return!0},allow_add:!0,add:'<a href="#">[ + ]</a>',before_add:function(e,t){return!0},after_add:function(e,t){return!0},allow_remove:!0,remove:'<a href="#">[ - ]</a>',before_remove:function(e,t){return!0},after_remove:function(e,t){return!0},allow_duplicate:!1,duplicate:'<a href="#">[ # ]</a>',before_duplicate:function(e,t){return!0},after_duplicate:function(e,t){return!0},before_init:function(e){},after_init:function(e){},min:0,max:100,add_at_the_end:!1,prefix:'collection',prototype_name:'__name__',name_prefix:null,elements_selector:'> div',elements_parent_selector:'%id%',children:null,init_with_n_elements:0,hide_useless_buttons:!0,drag_drop:!0,drag_drop_options:{'placeholder':'ui-state-highlight'},drag_drop_start:function(e,t){return!0},drag_drop_update:function(e,t){return!0},custom_add_location:!1,fade_in:!0,fade_out:!0,position_field_selector:null,preserve_names:!1};var y=function(){var e=''+Math.random()*1000*new Date().getTime();return e.replace('.','').split('').sort(function(){return 0.5-Math.random()}).join('')},l=function(t,n){if(!n.attr('id')){var i;do{i=t+'_'+y()}
while(e('#'+i).length>0);n.attr('id',i)};return n.attr('id')},c=function(t){try{var n=e(t)}catch(i){return null};if(n.length===0){return null}
else if(n.is('input[type="checkbox"]')){return(n.prop('checked')===!0?!0:!1)}
else if(n.is('input[type="radio"]')&&n.attr('name')!==undefined){return e('input[name="'+n.attr('name')+'"]:checked').val()}
else if(n.prop('value')!==undefined){return n.val()}
else{return n.html()}},d=function(t,n,i){try{var a=e(t)}catch(r){return};if(a.length===0){return}
else if(a.is('input[type="checkbox"]')){if(n){a.attr('checked',!0)}
else{a.removeAttr('checked')}}
else if(a.prop('value')!==undefined){if(i){a.attr('value',n)}
else{a.val(n)}}
else{a.html(n)}},n=function(e){return undefined===e||e},r=function(e){return(e+'').replace(/[.?*+^$[\]\\(){}|-]/g,'\\$&')},u=function(t,n,i,a){var r=function(t){var n=e(t);e.each(t.attributes,function(t,r){if(e.type(r.value)==='string'){n.attr(r.name.replace(i,a),r.value.replace(i,a))}});e.each(n.data(),function(t,r){if(e.type(r)==='string'){n.data(t.replace(i,a),r.replace(i,a))}})},o=t.eq(n);r(o[0]);o.find('*').each(function(){r(this)})},f=function(t,n,i,a,o,l){var d=new RegExp(r(i.name_prefix+'['+o+']'),'g'),f=i.name_prefix+'['+l+']';if(i.children){e.each(i.children,function(e,n){var r=t.find(n.selector).eq(a),i=r.data('collection-settings');if(i){i.name_prefix=i.name_prefix.replace(d,f);r.data('collection-settings',i)}})};u(n,a,d,f);d=new RegExp(r(t.attr('id')+'_'+o),'g');f=t.attr('id')+'_'+l;u(n,a,d,f)},b=function(e,t,n,i,a,o,f){var l=new RegExp(r(t.name_prefix+'['+o+']'),'g'),d=t.name_prefix+'['+f+']';n=n.replace(l,d);l=new RegExp(r(e.attr('id')+'_'+i),'g');d=e.attr('id')+'_'+a;n=n.replace(l,d);return n},j=function(t){e(t).find(':input').each(function(e,t){d(t,c(t),!0)})},i=function(e,t,n,i){var a=e.data('collection-settings');if(!a.position_field_selector&&!a.preserve_names){f(e,t,a,n,n,'__swap__');f(e,t,a,i,i,n);f(e,t,a,n,'__swap__',i)};t.eq(n).insertBefore(t.eq(i));if(i>n){t.eq(i).insertBefore(t.eq(n))}
else{t.eq(i).insertAfter(t.eq(n))};return e.find(a.elements_selector)},p=function(e,t,n,a,r){for(var o=a+1;(o<=r);o++){t=i(e,t,o,o-1)};return e.find(n.elements_selector)},h=function(e,t,n,a,r){for(var o=a-1;(o>=r);o--){t=i(e,t,o,o+1)};return e.find(n.elements_selector)},m=function(e,t,n,a){for(var r=a+1;r<t.length;r++){t=i(e,t,r-1,r)};return e.find(n.elements_selector)},q=function(e,t,n,a){for(var r=t.length-2;r>a;r--){t=i(e,t,r+1,r)};return e.find(n.elements_selector)},o=function(n,t,i,r){var f=e(t.elements_parent_selector),m=f.find('.'+t.prefix+'-tmp').length===0,a=n.find(t.elements_selector);if(t.allow_add){if(m){f.append('<span class="'+t.prefix+'-tmp"></span>');if(t.add){n.append(e(t.add).addClass(t.prefix+'-action '+t.prefix+'-rescue-add').data('collection',n.attr('id')))}}};if(i){var p=e(t.container),h=n.find('.'+t.prefix+'-add, .'+t.prefix+'-rescue-add, .'+t.prefix+'-duplicate').first();while(a.length<t.init_with_n_elements){var c=a.length>0?a.last():undefined,u=a.length-1;a=x(p,h,n,t,a,c,u,!1)}};n.data('last-index',a.length-1);a.each(function(o){var d=e(this);if(i){d.data('index',o)};var s=d.find('.'+t.prefix+'-actions').addBack().filter('.'+t.prefix+'-actions');if(s.length===0){s=e('<div class="'+t.prefix+'-actions"></div>');d.append(s)};var f=0;if(r==='remove'&&t.fade_out){f=1};var c=[{'enabled':t.allow_remove,'selector':t.prefix+'-remove','html':t.remove,'condition':a.length-f>t.min},{'enabled':t.allow_up,'selector':t.prefix+'-up','html':t.up,'condition':a.length-f>1&&a.index(d)-f>0},{'enabled':t.allow_down,'selector':t.prefix+'-down','html':t.down,'condition':a.length-f>1&&a.index(d)!==a.length-1},{'enabled':t.allow_add&&!t.add_at_the_end&&!t.custom_add_location,'selector':t.prefix+'-add','html':t.add,'condition':a.length-f<t.max},{'enabled':t.allow_duplicate,'selector':t.prefix+'-duplicate','html':t.duplicate,'condition':a.length-f<t.max}];e.each(c,function(i,a){if(a.enabled){var r=d.find('.'+a.selector);if(r.length===0&&a.html){r=e(a.html).appendTo(s).addClass(a.selector)};if(a.condition){r.removeClass(t.prefix+'-action-disabled');if(t.hide_useless_buttons){r.css('display','')}}
else{r.addClass(t.prefix+'-action-disabled');if(t.hide_useless_buttons){r.css('display','none')}};r.addClass(t.prefix+'-action').data('collection',n.attr('id')).data(t.prefix+'-element',l(n.attr('id')+'_'+o,d))}
else{d.find('.'+a.selector).css('display','none')}})});if(t.allow_add){var d=0;if(r==='remove'&&t.fade_out){d=1};var o=n.find('.'+t.prefix+'-rescue-add').css('display','').removeClass(t.prefix+'-action-disabled'),s=n.find('.'+t.prefix+'-add');if(!t.add_at_the_end&&s.length>d||t.custom_add_location){o.css('display','none')}
else if(r==='remove'&&t.fade_out){o.css('display','none');o.fadeIn('fast')};if(a.length-d>=t.max){o.addClass(t.prefix+'-action-disabled');if(t.hide_useless_buttons){n.find('.'+t.prefix+'-add, .'+t.prefix+'-rescue-add, .'+t.prefix+'-duplicate').css('display','none')}}}},v=function(t,n,i){if(i.children){e.each(i.children,function(e,i){if(!i.selector){console.log('jquery.collection.js: given collection '+t.attr('id')+' has children collections, but children\'s root selector is undefined.');return!0};if(n!==null){n.find(i.selector).collection(i)}
else{t.find(i.selector).collection(i)}})}},x=function(t,l,d,i,f,x,u,y){if(f.length<i.max&&(y&&n(i.before_duplicate(d,x))||n(i.before_add(d,x)))){var M=d.data('prototype'),p=d.data('last-index')+1;d.data('last-index',p);if(u===-1){u=f.length-1};var D=new RegExp(r(i.prototype_name),'g'),h=p;if(i.preserve_names){h=d.data('collection-free-key');if(h===undefined){h=B(i,f)};d.data('collection-free-key',h+1)};var c=e(M.replace(D,h)).data('index',p),A=e(i.elements_parent_selector),k=A.find('> .'+i.prefix+'-tmp'),F=e(c).find('[id]').first().attr('id');if(y){var w=f.eq(u);j(w);var E=e('<div/>').append(w.clone()).html(),C=i.preserve_names||i.position_field_selector?w.data('index'):u,Q=i.preserve_names?g(i,w):C,R=b(d,i,E,C,p,Q,h);c=e('<div/>').html(R).contents().data('index',p);if(i.fade_in){c.hide()};k.before(c).find(i.prefix+'-actions').remove()}
else{if(i.fade_in){c.hide()};k.before(c)};f=d.find(i.elements_selector);var q=c.find('.'+i.prefix+'-add, .'+i.prefix+'-duplicate');if(q.length>0){q.addClass(i.prefix+'-action').data('collection',d.attr('id'))};if(!i.add_at_the_end&&u+1!==p){f=s(d,i,f,c,p,u+1)}
else{o(d,i,!1)};v(d,c,i);if((y&&!n(i.after_duplicate(d,c)))||!n(i.after_add(d,c))){if(u!==-1){f=m(d,f,i,u+1)};c.remove()}};if(c!==undefined&&i.fade_in){c.fadeIn('fast',function(){if(i.position_field_selector){a(i,f)}})}
else{if(i.position_field_selector){return a(i,f)}};return f},C=function(t,i,r,o,l){if(r.length>i.min&&n(i.before_remove(t,o))){var d=function(){r=m(t,r,i,l);var o=r.last(),d=o.clone({withDataAndEvents:!0}).show();o.remove();if(!n(i.after_remove(t,d))){var f=e(i.elements_parent_selector);f.find('> .'+i.prefix+'-tmp').before(d);r=t.find(i.elements_selector);r=q(t,r,i,l-1)};if(i.position_field_selector){a(i,r)}};if(i.fade_out){o.fadeOut('fast',function(){d()})}
else{d()}};return r},k=function(e,t,r,o,l){if(l!==0&&n(t.before_up(e,o))){r=i(e,r,l,l-1);if(!n(t.after_up(e,o))){r=i(e,r,l-1,l)}};if(t.position_field_selector){return a(t,r)};return r},E=function(e,t,r,o,l){if(l!==(r.length-1)&&n(t.before_down(e,o))){r=i(e,r,l,l+1);if(!n(t.after_down(e,r))){r=i(e,r,l+1,l)}};if(t.position_field_selector){return a(t,r)};return r},s=function(e,t,r,l,d,f){if(1===Math.abs(f-d)){r=i(e,r,d,f);if(!(f-d>0?n(t.after_up(e,l)):n(t.after_down(e,l)))){r=i(e,r,f,d)}}
else{if(d<f){r=p(e,r,t,d,f);if(!(f-d>0?n(t.after_up(e,l)):n(t.after_down(e,l)))){r=h(e,r,t,f,d)}}
else{r=h(e,r,t,d,f);if(!(f-d>0?n(t.after_up(e,l)):n(t.after_down(e,l)))){r=p(e,r,t,f,d)}}};o(e,t,!1);if(t.position_field_selector){return a(t,r)};return r},a=function(t,n){e(n).each(function(){var i=e(this);d(i.find(t.position_field_selector),n.index(i))});return n},g=function(e,t){var n=t.find(':input[name^="'+e.name_prefix+'["]').attr('name');return n.slice(e.name_prefix.length+1).split(']',1)[0]},B=function(t,n){var i=0;n.each(function(){var n=g(t,e(this));if(/^0|[1-9]\d*$/.test(n)&&n>=i){i=Number(n)+1}});return i},w=e(this);if(w.length===0){console.log('jquery.collection.js: given collection selector does not exist.');return!1};w.each(function(){var i=e.extend(!0,{},Q,t);if(e(i.container).length===0){console.log('jquery.collection.js: a container should exist to handle events (basically, a <body> tag).');return!1};var h=e(this);if(h.data('collection')!==undefined){var a=e('#'+h.data('collection'));if(a.length===0){console.log('jquery.collection.js: given collection id does not exist.');return!0}}
else{a=h};a=e(a);i.elements_parent_selector=i.elements_parent_selector.replace('%id%','#'+l('',a));if(!i.elements_parent_selector){i.elements_parent_selector='#'+l('',a);if(e(i.elements_parent_selector).length===0){console.log('jquery.collection.js: given elements parent selector does not return any object.');return!0}};if(!i.allow_add){i.allow_duplicate=!1;i.add_at_the_end=!1};if(i.init_with_n_elements>i.max){i.init_with_n_elements=i.max};if(i.min&&(!i.init_with_n_elements||i.init_with_n_elements<i.min)){i.init_with_n_elements=i.min};i.before_init(a);if(a.data('prototype')===null){console.log('jquery.collection.js: given collection field has no prototype, check that your field has the prototype option set to true.');return!0};if(a.data('prototype-name')!==undefined){i.prototype_name=a.data('prototype-name')};if(a.data('allow-add')!==undefined){i.allow_add=a.data('allow-add');i.allow_duplicate=a.data('allow-add')?i.allow_duplicate:!1};if(a.data('allow-remove')!==undefined){i.allow_remove=a.data('allow-remove')};if(a.data('name-prefix')!==undefined){i.name_prefix=a.data('name-prefix')};if(!i.name_prefix){console.log('jquery.collection.js: the prefix used in descendant field names is mandatory, you can set it using 2 ways:');console.log('jquery.collection.js: - use the form theme given with this plugin source');console.log('jquery.collection.js: - set name_prefix option to  \'{{ formView.myCollectionField.vars.full_name }}\'');return!0};if(i.preserve_names){i.allow_up=!1;i.allow_down=!1;i.drag_drop=!1;i.add_at_the_end=!0};if((typeof jQuery.ui!=='undefined'&&typeof jQuery.ui.sortable!=='undefined')&&a.hasClass('ui-sortable')){a.sortable('disable')};if(i.drag_drop&&i.allow_up&&i.allow_down){var u,p;if(typeof jQuery.ui==='undefined'||typeof jQuery.ui.sortable==='undefined'){i.drag_drop=!1}
else{a.sortable(e.extend(!0,{},{start:function(t,r){var o=a.find(i.elements_selector),l=r.item,d=e(this);if(!n(i.drag_drop_start(t,r,o,l))){d.sortable('cancel');return};r.placeholder.height(r.item.height());r.placeholder.width(r.item.width());u=o.index(l)},update:function(t,r){var l=a.find(i.elements_selector),o=r.item,d=e(this);d.sortable('cancel');if(!1===i.drag_drop_update(t,r,l,o)||!(p-u>0?n(i.before_up(a,o)):n(i.before_down(a,o)))){return};p=l.index(o);l=a.find(i.elements_selector);s(a,i,l,o,u,p)}},i.drag_drop_options))}};a.data('collection-settings',i);var m=e(i.container);m.off('click','.'+i.prefix+'-action').on('click','.'+i.prefix+'-action',function(t){var i=e(this),r=e('#'+i.data('collection')),n=r.data('collection-settings');if(undefined===n){var r=e('#'+i.data('collection')).find('.'+i.data('collection')+'-collection'),n=r.data('collection-settings');if(undefined===n){throw'Can\'t find collection: '+i.data('collection')}};var a=r.find(n.elements_selector),l=i.data(n.prefix+'-element')?e('#'+i.data(n.prefix+'-element')):undefined,f=l&&l.length?a.index(l):-1,d=null,s=i.is('.'+n.prefix+'-duplicate');if((i.is('.'+n.prefix+'-add')||i.is('.'+n.prefix+'-rescue-add')||s)&&n.allow_add){d='add';a=x(m,i,r,n,a,l,f,s)};if(i.is('.'+n.prefix+'-remove')&&n.allow_remove){d='remove';a=C(r,n,a,l,f)};if(i.is('.'+n.prefix+'-up')&&n.allow_up){d='up';a=k(r,n,a,l,f)};if(i.is('.'+n.prefix+'-down')&&n.allow_down){d='down';a=E(r,n,a,l,f)};o(r,n,!1,d);t.preventDefault()});o(a,i,!0);v(a,null,i);if(i.position_field_selector){var f=[],r=a.find(i.elements_selector);r.each(function(t){var n=e(this);f.push({position:parseFloat(c(n.find(i.position_field_selector))),element:n})});var g=function(e,t){return(e.position<t.position?-1:(e.position>t.position?1:0))};f.sort(g);e.each(f,function(t,n){var f=[];e(r).each(function(t){f.push(e(this).attr('id'))});var o=n.element,l=e.inArray(o.attr('id'),f);if(t!==l){r=s(a,i,r,o,l,t);d(o.find(i.position_field_selector),r.index(o))}})};i.after_init(a)});return!0}})(jQuery);
;$(document).ready(function(){$("#modal-dialog").dialog({modal:!0,hide:"fade",show:"fade",autoOpen:!1});$("button#remove-all-from-cart").on("click",function(){var t=$("#js-vars").data("vars").ajax_path_remove_all;$("#modal-dialog").html("<p>Étes-vous sûr de vouloir clear le panier ?</p><button id='confirm-remove-all-from-cart'>Confirmer</button>");$("#confirm-remove-all-from-cart").on("click",function(){$(this).hide();$.ajax({url:t,data:{},method:"get",beforeSend:function(){$("#modal-dialog").html("<p>Requête AJAX en cours...</p>")},success:function(t){$("#modal-dialog").html("<p>C'est fait !</p>");$("#cart-content").html(t)},error:function(){$("#modal-dialog").html("<p>OUPS, erreur imprévue</p>")}})})});$("button.remove-from-cart-button").on("click",function(){var t=$(this).attr("purchase"),a=$("#js-vars").data("vars").ajax_path_remove_one;$("#modal-dialog").html("<p>Étes-vous sûr de supprimer cet élément du panier ?</p>                               <button id='confirm-delete-from-cart'>Confirmer</button>");$("#confirm-delete-from-cart").on("click",function(){$(this).hide();$.ajax({url:a,data:{id_purchase:t},method:"get",beforeSend:function(){$("#modal-dialog").html("<p>Requête AJAX en cours...</p>")},success:function(t){$("#modal-dialog").html("<p>C'est fait !</p>");$("#cart-content").html(t)},error:function(){$("#modal-dialog").html("<p>OUPS, erreur imprévue</p>")}})})});$("button.add-to-cart-button").on("click",function(){var a=$(this).prev("select"),t=a.val(),e=$(this).attr("counterpart"),o=$(this).attr("contract"),r=$("#js-vars").data("vars").ajax_path_add_to_cart;if(t>0){$("#modal-dialog").dialog("open").html("<p>Étes-vous sûr d'ajouter "+t+" fois cet élément au panier ?</p>                               <button id='confirm-add-to-cart'>Ajouter au panier</button>");$("#confirm-add-to-cart").on("click",function(){$(this).hide();$.ajax({url:r,data:{id_counterpart:e,id_contract_artist:o,quantity:t},method:"get",beforeSend:function(){$("#modal-dialog").html("<p>Requête AJAX en cours...</p>")},success:function(t){if(t=="OK"){$("#modal-dialog").html("<p>C'est fait !</p>")}
else if(t=="MAX_QTY"){$("#modal-dialog").html("<p>Impossible : quantité maximale déjà atteinte pour cet article</p>")}
else if(t=="TO_MAX_QTY"){$("#modal-dialog").html("<p>C'est fait ! (Quantité maximale atteinte pour cet article)</p>")};a.val(0)},error:function(){$("#modal-dialog").html("<p>OUPS, erreur imprévue</p>")}})})}});$(".deblock-advantage-button").click(function(){var a=$(this).prev("select"),t=parseInt(a.val()),e=parseInt($(this).attr("advantage")),o=parseInt($(this).attr("price")),r=$("#js-vars").data("vars").ajax_path;if(t>0){$("#modal-dialog").dialog("open").html("<p>Étes-vous sûr de débloquer "+t+" fois cet élément ? Cela vous coûtera "+t*o+" crédits </p>                               <button id='confirm-deblock'>Confirmer</button>")};$("#confirm-deblock").click(function(){$(this).hide();$.ajax({url:r,data:{id_advantage:e,quantity:t},method:"get",beforeSend:function(){$("#modal-dialog").html("<p>Requête AJAX en cours...</p>")},success:function(t){if(t=="NOT_ENOUGH_CREDITS"){$("#modal-dialog").html("<p>Vous n'avez pas assez de crédits pour acheter tout ça... Transaction annulée !</p>")}
else{var e=parseInt(t);$("#modal-dialog").html("<p>Transaction réussie. Vous n'avez maintenant plus que "+e+" crédits bonus.</p>");$("#nb_credits_fan").text(e)};a.val(0)},error:function(){$("#modal-dialog").html("<p>OUPS, erreur imprévue</p>")}})})});$("a.toggleAdvantageDescription").click(function(){$(this).siblings("blockquote").slideToggle()})});
;function um_collection(e){$('.collection').collection($.extend({up:'',down:'',add_at_the_end:!0,add:'<a href="#">Ajouter</a>'},e))};
(function(){var e,i,r,s,o,l,a,t,u,n=[].slice,p=function(e,t){for(var i in t){if(c.call(t,i))e[i]=t[i]};function n(){this.constructor=e};n.prototype=t.prototype;e.prototype=new n();e.__super__=t.prototype;return e},c={}.hasOwnProperty;t=function(){};i=(function(){function e(){};e.prototype.addEventListener=e.prototype.on;e.prototype.on=function(e,t){this._callbacks=this._callbacks||{};if(!this._callbacks[e]){this._callbacks[e]=[]};this._callbacks[e].push(t);return this};e.prototype.emit=function(){var i,r,e,s,t,o;s=arguments[0],i=2<=arguments.length?n.call(arguments,1):[];this._callbacks=this._callbacks||{};e=this._callbacks[s];if(e){for(t=0,o=e.length;t<o;t++){r=e[t];r.apply(this,i)}};return this};e.prototype.removeListener=e.prototype.off;e.prototype.removeAllListeners=e.prototype.off;e.prototype.removeEventListener=e.prototype.off;e.prototype.off=function(e,t){var s,i,n,r,o;if(!this._callbacks||arguments.length===0){this._callbacks={};return this};i=this._callbacks[e];if(!i){return this};if(arguments.length===1){delete this._callbacks[e];return this};for(n=r=0,o=i.length;r<o;n=++r){s=i[n];if(s===t){i.splice(n,1);break}};return this};return e})();e=(function(e){var l,o;p(s,e);s.prototype.Emitter=i;s.prototype.events=['drop','dragstart','dragend','dragenter','dragover','dragleave','addedfile','addedfiles','removedfile','thumbnail','error','errormultiple','processing','processingmultiple','uploadprogress','totaluploadprogress','sending','sendingmultiple','success','successmultiple','canceled','canceledmultiple','complete','completemultiple','reset','maxfilesexceeded','maxfilesreached','queuecomplete'];s.prototype.defaultOptions={url:null,method:'post',withCredentials:!1,timeout:30000,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:'file',createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:'crop',resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:0.8,resizeMethod:'contain',filesizeBase:1000,maxFiles:null,params:{},headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:'body',capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:'Drop files here to upload',dictFallbackMessage:'Your browser does not support drag\'n\'drop file uploads.',dictFallbackText:'Please use the fallback form below to upload your files like in the olden days.',dictFileTooBig:'File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.',dictInvalidFileType:'You can\'t upload files of this type.',dictResponseError:'Server responded with {{statusCode}} code.',dictCancelUpload:'Cancel upload',dictCancelUploadConfirmation:'Are you sure you want to cancel this upload?',dictRemoveFile:'Remove file',dictRemoveFileConfirmation:null,dictMaxFilesExceeded:'You can not upload any more files.',dictFileSizeUnits:{tb:'TB',gb:'GB',mb:'MB',kb:'KB',b:'b'},init:function(){return t},accept:function(e,t){return t()},fallback:function(){var i,n,o,t,r,e;this.element.className=this.element.className+' dz-browser-not-supported';r=this.element.getElementsByTagName('div');for(n=0,o=r.length;n<o;n++){i=r[n];if(/(^| )dz-message($| )/.test(i.className)){t=i;i.className='dz-message';continue}};if(!t){t=s.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(t)};e=t.getElementsByTagName('span')[0];if(e){if(e.textContent!=null){e.textContent=this.options.dictFallbackMessage}
else if(e.innerText!=null){e.innerText=this.options.dictFallbackMessage}};return this.element.appendChild(this.getFallbackForm())},resize:function(e,t,i,r){var n,s,o;n={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height};s=e.width/e.height;if((t==null)&&(i==null)){t=n.srcWidth;i=n.srcHeight}
else if(t==null){t=i*s}
else if(i==null){i=t/s};t=Math.min(t,n.srcWidth);i=Math.min(i,n.srcHeight);o=t/i;if(n.srcWidth>t||n.srcHeight>i){if(r==='crop'){if(s>o){n.srcHeight=e.height;n.srcWidth=n.srcHeight*o}
else{n.srcWidth=e.width;n.srcHeight=n.srcWidth/o}}
else if(r==='contain'){if(s>o){i=t/s}
else{t=i*s}}
else{throw new Error('Unknown resizeMethod \''+r+'\'')}};n.srcX=(e.width-n.srcWidth)/2;n.srcY=(e.height-n.srcHeight)/2;n.trgWidth=t;n.trgHeight=i;return n},transformFile:function(e,t){if((this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)){return this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t)}
else{return t(e)}},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove('dz-drag-hover')},dragstart:t,dragend:function(e){return this.element.classList.remove('dz-drag-hover')},dragenter:function(e){return this.element.classList.add('dz-drag-hover')},dragover:function(e){return this.element.classList.add('dz-drag-hover')},dragleave:function(e){return this.element.classList.remove('dz-drag-hover')},paste:t,reset:function(){return this.element.classList.remove('dz-started')},addedfile:function(e){var t,i,n,p,c,d,r,o,l,a,h,f,u;if(this.element===this.previewsContainer){this.element.classList.add('dz-started')};if(this.previewsContainer){e.previewElement=s.createElement(this.options.previewTemplate.trim());e.previewTemplate=e.previewElement;this.previewsContainer.appendChild(e.previewElement);o=e.previewElement.querySelectorAll('[data-dz-name]');for(t=0,p=o.length;t<p;t++){r=o[t];r.textContent=e.name};l=e.previewElement.querySelectorAll('[data-dz-size]');for(i=0,c=l.length;i<c;i++){r=l[i];r.innerHTML=this.filesize(e.size)};if(this.options.addRemoveLinks){e._removeLink=s.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+'</a>');e.previewElement.appendChild(e._removeLink)};h=(function(t){return function(i){i.preventDefault();i.stopPropagation();if(e.status===s.UPLOADING){return s.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)})}
else{if(t.options.dictRemoveFileConfirmation){return s.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)})}
else{return t.removeFile(e)}}}})(this);a=e.previewElement.querySelectorAll('[data-dz-remove]');u=[];for(n=0,d=a.length;n<d;n++){f=a[n];u.push(f.addEventListener('click',h))};return u}},removedfile:function(e){var t;if(e.previewElement){if((t=e.previewElement)!=null){t.parentNode.removeChild(e.previewElement)}};return this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var i,s,n,r;if(e.previewElement){e.previewElement.classList.remove('dz-file-preview');n=e.previewElement.querySelectorAll('[data-dz-thumbnail]');for(i=0,s=n.length;i<s;i++){r=n[i];r.alt=e.name;r.src=t};return setTimeout(((function(t){return function(){return e.previewElement.classList.add('dz-image-preview')}})(this)),1)}},error:function(e,t){var i,s,o,n,r;if(e.previewElement){e.previewElement.classList.add('dz-error');if(typeof t!=='String'&&t.error){t=t.error};n=e.previewElement.querySelectorAll('[data-dz-errormessage]');r=[];for(i=0,s=n.length;i<s;i++){o=n[i];r.push(o.textContent=t)};return r}},errormultiple:t,processing:function(e){if(e.previewElement){e.previewElement.classList.add('dz-processing');if(e._removeLink){return e._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:t,uploadprogress:function(e,t,i){var n,l,r,o,s;if(e.previewElement){o=e.previewElement.querySelectorAll('[data-dz-uploadprogress]');s=[];for(n=0,l=o.length;n<l;n++){r=o[n];if(r.nodeName==='PROGRESS'){s.push(r.value=t)}
else{s.push(r.style.width=t+'%')}};return s}},totaluploadprogress:t,sending:t,sendingmultiple:t,success:function(e){if(e.previewElement){return e.previewElement.classList.add('dz-success')}},successmultiple:t,canceled:function(e){return this.emit('error',e,'Upload canceled.')},canceledmultiple:t,complete:function(e){if(e._removeLink){e._removeLink.textContent=this.options.dictRemoveFile};if(e.previewElement){return e.previewElement.classList.add('dz-complete')}},completemultiple:t,maxfilesexceeded:t,maxfilesreached:t,queuecomplete:t,addedfiles:t};l=function(){var e,t,o,i,r,s,l;s=arguments[0],r=2<=arguments.length?n.call(arguments,1):[];for(e=0,o=r.length;e<o;e++){i=r[e];for(t in i){l=i[t];s[t]=l}};return s};function s(e,t){var n,i,r;this.element=e;this.version=s.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,'');this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==='string'){this.element=document.querySelector(this.element)};if(!(this.element&&(this.element.nodeType!=null))){throw new Error('Invalid dropzone element.')};if(this.element.dropzone){throw new Error('Dropzone already attached.')};s.instances.push(this);this.element.dropzone=this;n=(r=s.optionsForElement(this.element))!=null?r:{};this.options=l({},this.defaultOptions,n,t!=null?t:{});if(this.options.forceFallback||!s.isBrowserSupported()){return this.options.fallback.call(this)};if(this.options.url==null){this.options.url=this.element.getAttribute('action')};if(!this.options.url){throw new Error('No URL provided.')};if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error('You can\'t provide both \'acceptedFiles\' and \'acceptedMimeTypes\'. \'acceptedMimeTypes\' is deprecated.')};if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes};if(this.options.renameFilename!=null){this.options.renameFile=(function(e){return function(t){return e.options.renameFilename.call(e,t.name,t)}})(this)};this.options.method=this.options.method.toUpperCase();if((i=this.getExistingFallback())&&i.parentNode){i.parentNode.removeChild(i)};if(this.options.previewsContainer!==!1){if(this.options.previewsContainer){this.previewsContainer=s.getElement(this.options.previewsContainer,'previewsContainer')}
else{this.previewsContainer=this.element}};if(this.options.clickable){if(this.options.clickable===!0){this.clickableElements=[this.element]}
else{this.clickableElements=s.getElements(this.options.clickable,'clickable')}};this.init()};s.prototype.getAcceptedFiles=function(){var t,e,r,i,n;i=this.files;n=[];for(e=0,r=i.length;e<r;e++){t=i[e];if(t.accepted){n.push(t)}};return n};s.prototype.getRejectedFiles=function(){var t,e,r,i,n;i=this.files;n=[];for(e=0,r=i.length;e<r;e++){t=i[e];if(!t.accepted){n.push(t)}};return n};s.prototype.getFilesWithStatus=function(e){var i,t,s,n,r;n=this.files;r=[];for(t=0,s=n.length;t<s;t++){i=n[t];if(i.status===e){r.push(i)}};return r};s.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(s.QUEUED)};s.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(s.UPLOADING)};s.prototype.getAddedFiles=function(){return this.getFilesWithStatus(s.ADDED)};s.prototype.getActiveFiles=function(){var e,t,r,i,n;i=this.files;n=[];for(t=0,r=i.length;t<r;t++){e=i[t];if(e.status===s.UPLOADING||e.status===s.QUEUED){n.push(e)}};return n};s.prototype.init=function(){var i,e,o,t,l,n,r;if(this.element.tagName==='form'){this.element.setAttribute('enctype','multipart/form-data')};if(this.element.classList.contains('dropzone')&&!this.element.querySelector('.dz-message')){this.element.appendChild(s.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+'</span></div>'))};if(this.clickableElements.length){r=(function(e){return function(){if(e.hiddenFileInput){e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput)};e.hiddenFileInput=document.createElement('input');e.hiddenFileInput.setAttribute('type','file');if((e.options.maxFiles==null)||e.options.maxFiles>1){e.hiddenFileInput.setAttribute('multiple','multiple')};e.hiddenFileInput.className='dz-hidden-input';if(e.options.acceptedFiles!=null){e.hiddenFileInput.setAttribute('accept',e.options.acceptedFiles)};if(e.options.capture!=null){e.hiddenFileInput.setAttribute('capture',e.options.capture)};e.hiddenFileInput.style.visibility='hidden';e.hiddenFileInput.style.position='absolute';e.hiddenFileInput.style.top='0';e.hiddenFileInput.style.left='0';e.hiddenFileInput.style.height='0';e.hiddenFileInput.style.width='0';document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput);return e.hiddenFileInput.addEventListener('change',function(){var n,t,i,s;t=e.hiddenFileInput.files;if(t.length){for(i=0,s=t.length;i<s;i++){n=t[i];e.addFile(n)}};e.emit('addedfiles',t);return r()})}})(this);r()};this.URL=(l=window.URL)!=null?l:window.webkitURL;n=this.events;for(e=0,o=n.length;e<o;e++){i=n[e];this.on(i,this.options[i])};this.on('uploadprogress',(function(e){return function(){return e.updateTotalUploadProgress()}})(this));this.on('removedfile',(function(e){return function(){return e.updateTotalUploadProgress()}})(this));this.on('canceled',(function(e){return function(t){return e.emit('complete',t)}})(this));this.on('complete',(function(e){return function(t){if(e.getAddedFiles().length===0&&e.getUploadingFiles().length===0&&e.getQueuedFiles().length===0){return setTimeout((function(){return e.emit('queuecomplete')}),0)}}})(this));t=function(e){e.stopPropagation();if(e.preventDefault){return e.preventDefault()}
else{return e.returnValue=!1}};this.listeners=[{element:this.element,events:{'dragstart':(function(e){return function(t){return e.emit('dragstart',t)}})(this),'dragenter':(function(e){return function(i){t(i);return e.emit('dragenter',i)}})(this),'dragover':(function(e){return function(i){var r;try{r=i.dataTransfer.effectAllowed}catch(n){};i.dataTransfer.dropEffect='move'===r||'linkMove'===r?'move':'copy';t(i);return e.emit('dragover',i)}})(this),'dragleave':(function(e){return function(t){return e.emit('dragleave',t)}})(this),'drop':(function(e){return function(i){t(i);return e.drop(i)}})(this),'dragend':(function(e){return function(t){return e.emit('dragend',t)}})(this)}}];this.clickableElements.forEach((function(e){return function(t){return e.listeners.push({element:t,events:{'click':function(i){if((t!==e.element)||(i.target===e.element||s.elementInside(i.target,e.element.querySelector('.dz-message')))){e.hiddenFileInput.click()};return!0}}})}})(this));this.enable();return this.options.init.call(this)};s.prototype.destroy=function(){var e;this.disable();this.removeAllFiles(!0);if((e=this.hiddenFileInput)!=null?e.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null};delete this.element.dropzone;return s.instances.splice(s.instances.indexOf(this),1)};s.prototype.updateTotalUploadProgress=function(){var o,n,e,l,r,t,i,s;i=0;t=0;o=this.getActiveFiles();if(o.length){r=this.getActiveFiles();for(e=0,l=r.length;e<l;e++){n=r[e];i+=n.upload.bytesSent;t+=n.upload.total};s=100*i/t}
else{s=100};return this.emit('totaluploadprogress',s,t,i)};s.prototype._getParamName=function(e){if(typeof this.options.paramName==='function'){return this.options.paramName(e)}
else{return''+this.options.paramName+(this.options.uploadMultiple?'['+e+']':'')}};s.prototype._renameFile=function(e){if(typeof this.options.renameFile!=='function'){return e.name};return this.options.renameFile(e)};s.prototype.getFallbackForm=function(){var n,i,e,t;if(n=this.getExistingFallback()){return n};e='<div class="dz-fallback">';if(this.options.dictFallbackText){e+='<p>'+this.options.dictFallbackText+'</p>'};e+='<input type="file" name="'+(this._getParamName(0))+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';i=s.createElement(e);if(this.element.tagName!=='FORM'){t=s.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');t.appendChild(i)}
else{this.element.setAttribute('enctype','multipart/form-data');this.element.setAttribute('method',this.options.method)};return t!=null?t:i};s.prototype.getExistingFallback=function(){var i,n,e,r,t,s;n=function(e){var i,t,n;for(t=0,n=e.length;t<n;t++){i=e[t];if(/(^| )fallback($| )/.test(i.className)){return i}}};t=['div','form'];for(e=0,r=t.length;e<r;e++){s=t[e];if(i=n(this.element.getElementsByTagName(s))){return i}}};s.prototype.setupEventListeners=function(){var t,i,e,s,o,n,r;n=this.listeners;r=[];for(e=0,s=n.length;e<s;e++){t=n[e];r.push((function(){var e,n;e=t.events;n=[];for(i in e){o=e[i];n.push(t.element.addEventListener(i,o,!1))};return n})())};return r};s.prototype.removeEventListeners=function(){var t,i,e,s,o,n,r;n=this.listeners;r=[];for(e=0,s=n.length;e<s;e++){t=n[e];r.push((function(){var e,n;e=t.events;n=[];for(i in e){o=e[i];n.push(t.element.removeEventListener(i,o,!1))};return n})())};return r};s.prototype.disable=function(){var n,e,r,t,i;this.clickableElements.forEach(function(e){return e.classList.remove('dz-clickable')});this.removeEventListeners();t=this.files;i=[];for(e=0,r=t.length;e<r;e++){n=t[e];i.push(this.cancelUpload(n))};return i};s.prototype.enable=function(){this.clickableElements.forEach(function(e){return e.classList.add('dz-clickable')});return this.setupEventListeners()};s.prototype.filesize=function(e){var o,t,n,l,i,r,a,s;i=0;r='b';if(e>0){s=['tb','gb','mb','kb','b'];for(t=n=0,l=s.length;n<l;t=++n){a=s[t];o=Math.pow(this.options.filesizeBase,4-t)/10;if(e>=o){i=e/Math.pow(this.options.filesizeBase,4-t);r=a;break}};i=Math.round(10*i)/10};return'<strong>'+i+'</strong> '+this.options.dictFileSizeUnits[r]};s.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit('maxfilesreached',this.files)};return this.element.classList.add('dz-max-files-reached')}
else{return this.element.classList.remove('dz-max-files-reached')}};s.prototype.drop=function(e){var i,t;if(!e.dataTransfer){return};this.emit('drop',e);i=e.dataTransfer.files;this.emit('addedfiles',i);if(i.length){t=e.dataTransfer.items;if(t&&t.length&&(t[0].webkitGetAsEntry!=null)){this._addFilesFromItems(t)}
else{this.handleFiles(i)}}};s.prototype.paste=function(e){var t,i;if((e!=null?(i=e.clipboardData)!=null?i.items:void 0:void 0)==null){return};this.emit('paste',e);t=e.clipboardData.items;if(t.length){return this._addFilesFromItems(t)}};s.prototype.handleFiles=function(e){var n,t,r,i;i=[];for(t=0,r=e.length;t<r;t++){n=e[t];i.push(this.addFile(n))};return i};s.prototype._addFilesFromItems=function(e){var n,t,r,s,i;i=[];for(r=0,s=e.length;r<s;r++){t=e[r];if((t.webkitGetAsEntry!=null)&&(n=t.webkitGetAsEntry())){if(n.isFile){i.push(this.addFile(t.getAsFile()))}
else if(n.isDirectory){i.push(this._addFilesFromDirectory(n,n.name))}
else{i.push(void 0)}}
else if(t.getAsFile!=null){if((t.kind==null)||t.kind==='file'){i.push(this.addFile(t.getAsFile()))}
else{i.push(void 0)}}
else{i.push(void 0)}};return i};s.prototype._addFilesFromDirectory=function(e,t){var n,r,i;n=e.createReader();r=function(e){return typeof console!=='undefined'&&console!==null?typeof console.log==='function'?console.log(e):void 0:void 0};i=(function(e){return function(){return n.readEntries(function(n){var r,s,o;if(n.length>0){for(s=0,o=n.length;s<o;s++){r=n[s];if(r.isFile){r.file(function(i){if(e.options.ignoreHiddenFiles&&i.name.substring(0,1)==='.'){return};i.fullPath=t+'/'+i.name;return e.addFile(i)})}
else if(r.isDirectory){e._addFilesFromDirectory(r,t+'/'+r.name)}};i()};return null},r)}})(this);return i()};s.prototype.accept=function(e,t){if(e.size>this.options.maxFilesize*1024*1024){return t(this.options.dictFileTooBig.replace('{{filesize}}',Math.round(e.size/1024/10.24)/100).replace('{{maxFilesize}}',this.options.maxFilesize))}
else if(!s.isValidFile(e,this.options.acceptedFiles)){return t(this.options.dictInvalidFileType)}
else if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){t(this.options.dictMaxFilesExceeded.replace('{{maxFiles}}',this.options.maxFiles));return this.emit('maxfilesexceeded',e)}
else{return this.options.accept.call(this,e,t)}};s.prototype.addFile=function(e){e.upload={progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e)};this.files.push(e);e.status=s.ADDED;this.emit('addedfile',e);this._enqueueThumbnail(e);return this.accept(e,(function(t){return function(i){if(i){e.accepted=!1;t._errorProcessing([e],i)}
else{e.accepted=!0;if(t.options.autoQueue){t.enqueueFile(e)}};return t._updateMaxFilesReachedClass()}})(this))};s.prototype.enqueueFiles=function(e){var i,t,n;for(t=0,n=e.length;t<n;t++){i=e[t];this.enqueueFile(i)};return null};s.prototype.enqueueFile=function(e){if(e.status===s.ADDED&&e.accepted===!0){e.status=s.QUEUED;if(this.options.autoProcessQueue){return setTimeout(((function(e){return function(){return e.processQueue()}})(this)),0)}}
else{throw new Error('This file can\'t be queued because it has already been processed or was rejected.')}};s.prototype._thumbnailQueue=[];s.prototype._processingThumbnail=!1;s.prototype._enqueueThumbnail=function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(e);return setTimeout(((function(e){return function(){return e._processThumbnailQueue()}})(this)),0)}};s.prototype._processThumbnailQueue=function(){var e;if(this._processingThumbnail||this._thumbnailQueue.length===0){return};this._processingThumbnail=!0;e=this._thumbnailQueue.shift();return this.createThumbnail(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,(function(t){return function(i){t.emit('thumbnail',e,i);t._processingThumbnail=!1;return t._processThumbnailQueue()}})(this))};s.prototype.removeFile=function(e){if(e.status===s.UPLOADING){this.cancelUpload(e)};this.files=u(this.files,e);this.emit('removedfile',e);if(this.files.length===0){return this.emit('reset')}};s.prototype.removeAllFiles=function(e){var i,t,r,n;if(e==null){e=!1};n=this.files.slice();for(t=0,r=n.length;t<r;t++){i=n[t];if(i.status!==s.UPLOADING||e){this.removeFile(i)}};return null};s.prototype.resizeImage=function(e,t,i,n,o){return this.createThumbnail(e,t,i,n,!1,(function(t){return function(i,n){var l,a;if(n===null){return o(e)}
else{l=t.options.resizeMimeType;if(l==null){l=e.type};a=n.toDataURL(l,t.options.resizeQuality);if(l==='image/jpeg'||l==='image/jpg'){a=r.restore(e.dataURL,a)};return o(s.dataURItoBlob(a))}}})(this))};s.prototype.createThumbnail=function(e,t,i,n,o,r){var s;s=new FileReader;s.onload=(function(l){return function(){e.dataURL=s.result;if(e.type==='image/svg+xml'){if(r!=null){r(s.result)};return};return l.createThumbnailFromUrl(e,t,i,n,o,r)}})(this);return s.readAsDataURL(e)};s.prototype.createThumbnailFromUrl=function(e,t,i,s,o,r,l){var n;n=document.createElement('img');if(l){n.crossOrigin=l};n.onload=(function(l){return function(){var u;u=function(e){return e(1)};if((typeof EXIF!=='undefined'&&EXIF!==null)&&o){u=function(e){return EXIF.getData(n,function(){return e(EXIF.getTag(this,'Orientation'))})}};return u(function(o){var p,u,d,h,f,m,c,g;e.width=n.width;e.height=n.height;c=l.options.resize.call(l,e,t,i,s);p=document.createElement('canvas');u=p.getContext('2d');p.width=c.trgWidth;p.height=c.trgHeight;if(o>4){p.width=c.trgHeight;p.height=c.trgWidth};switch(o){case 2:u.translate(p.width,0);u.scale(-1,1);break;case 3:u.translate(p.width,p.height);u.rotate(Math.PI);break;case 4:u.translate(0,p.height);u.scale(1,-1);break;case 5:u.rotate(0.5*Math.PI);u.scale(1,-1);break;case 6:u.rotate(0.5*Math.PI);u.translate(0,-p.height);break;case 7:u.rotate(0.5*Math.PI);u.translate(p.width,-p.height);u.scale(-1,1);break;case 8:u.rotate(-0.5*Math.PI);u.translate(-p.width,0)};a(u,n,(d=c.srcX)!=null?d:0,(h=c.srcY)!=null?h:0,c.srcWidth,c.srcHeight,(f=c.trgX)!=null?f:0,(m=c.trgY)!=null?m:0,c.trgWidth,c.trgHeight);g=p.toDataURL('image/png');if(r!=null){return r(g,p)}})}})(this);if(r!=null){n.onerror=r};return n.src=e.dataURL};s.prototype.processQueue=function(){var n,t,i,e;t=this.options.parallelUploads;i=this.getUploadingFiles().length;n=i;if(i>=t){return};e=this.getQueuedFiles();if(!(e.length>0)){return};if(this.options.uploadMultiple){return this.processFiles(e.slice(0,t-i))}
else{while(n<t){if(!e.length){return};this.processFile(e.shift());n++}}};s.prototype.processFile=function(e){return this.processFiles([e])};s.prototype.processFiles=function(e){var t,i,n;for(i=0,n=e.length;i<n;i++){t=e[i];t.processing=!0;t.status=s.UPLOADING;this.emit('processing',t)};if(this.options.uploadMultiple){this.emit('processingmultiple',e)};return this.uploadFiles(e)};s.prototype._getFilesWithXhr=function(e){var t,i;return i=(function(){var i,s,n,r;n=this.files;r=[];for(i=0,s=n.length;i<s;i++){t=n[i];if(t.xhr===e){r.push(t)}};return r}).call(this)};s.prototype.cancelUpload=function(e){var i,t,n,r,o,l,a;if(e.status===s.UPLOADING){t=this._getFilesWithXhr(e.xhr);for(n=0,o=t.length;n<o;n++){i=t[n];i.status=s.CANCELED};e.xhr.abort();for(r=0,l=t.length;r<l;r++){i=t[r];this.emit('canceled',i)};if(this.options.uploadMultiple){this.emit('canceledmultiple',t)}}
else if((a=e.status)===s.ADDED||a===s.QUEUED){e.status=s.CANCELED;this.emit('canceled',e);if(this.options.uploadMultiple){this.emit('canceledmultiple',[e])}};if(this.options.autoProcessQueue){return this.processQueue()}};o=function(){var t,e;e=arguments[0],t=2<=arguments.length?n.call(arguments,1):[];if(typeof e==='function'){return e.apply(this,t)};return e};s.prototype.uploadFile=function(e){return this.uploadFiles([e])};s.prototype.uploadFiles=function(e){var T,S,i,n,v,y,F,d,u,r,w,b,h,f,E,m,M,D,I,U,g,R,p,z,N,P,k,C,x,O,c,a,L,A,q,Q,t;t=new XMLHttpRequest();for(h=0,M=e.length;h<M;h++){i=e[h];i.xhr=t};R=o(this.options.method,e);q=o(this.options.url,e);t.open(R,q,!0);t.timeout=o(this.options.timeout,e);t.withCredentials=!!this.options.withCredentials;a=null;v=(function(n){return function(){var r,o,s;s=[];for(r=0,o=e.length;r<o;r++){i=e[r];s.push(n._errorProcessing(e,a||n.options.dictResponseError.replace('{{statusCode}}',t.status),t))};return s}})(this);A=(function(t){return function(n){var a,s,o,p,c,d,l,r,u;if(n!=null){r=100*n.loaded/n.total;for(s=0,p=e.length;s<p;s++){i=e[s];i.upload.progress=r;i.upload.total=n.total;i.upload.bytesSent=n.loaded}}
else{a=!0;r=100;for(o=0,c=e.length;o<c;o++){i=e[o];if(!(i.upload.progress===100&&i.upload.bytesSent===i.upload.total)){a=!1};i.upload.progress=r;i.upload.bytesSent=i.upload.total};if(a){return}};u=[];for(l=0,d=e.length;l<d;l++){i=e[l];u.push(t.emit('uploadprogress',i,r,i.upload.bytesSent))};return u}})(this);t.onload=(function(i){return function(n){var l,o;if(e[0].status===s.CANCELED){return};if(t.readyState!==4){return};if(t.responseType!=='arraybuffer'&&t.responseType!=='blob'){a=t.responseText;if(t.getResponseHeader('content-type')&&~t.getResponseHeader('content-type').indexOf('application/json')){try{a=JSON.parse(a)}catch(r){n=r;a='Invalid JSON response from server.'}}};A();if(!((200<=(o=t.status)&&o<300))){return v()}
else{return i._finished(e,a,n)}}})(this);t.onerror=(function(t){return function(){if(e[0].status===s.CANCELED){return};return v()}})(this);N=(P=t.upload)!=null?P:t;N.onprogress=A;d={'Accept':'application/json','Cache-Control':'no-cache','X-Requested-With':'XMLHttpRequest'};if(this.options.headers){l(d,this.options.headers)};for(y in d){F=d[y];if(F){t.setRequestHeader(y,F)}};n=new FormData();if(this.options.params){k=this.options.params;for(E in k){Q=k[E];n.append(E,Q)}};for(f=0,D=e.length;f<D;f++){i=e[f];this.emit('sending',i,t,n)};if(this.options.uploadMultiple){this.emit('sendingmultiple',e,t,n)};if(this.element.tagName==='FORM'){C=this.element.querySelectorAll('input, textarea, select, button');for(m=0,I=C.length;m<I;m++){r=C[m];w=r.getAttribute('name');b=r.getAttribute('type');if(r.tagName==='SELECT'&&r.hasAttribute('multiple')){x=r.options;for(g=0,U=x.length;g<U;g++){z=x[g];if(z.selected){n.append(w,z.value)}}}
else if(!b||((O=b.toLowerCase())!=='checkbox'&&O!=='radio')||r.checked){n.append(w,r.value)}}};T=0;L=[];for(u=p=0,c=e.length-1;0<=c?p<=c:p>=c;u=0<=c?++p:--p){S=(function(i){return function(r,s,o){return function(r){n.append(s,r,o);if(++T===e.length){return i.submitRequest(t,n,e)}}}})(this);L.push(this.options.transformFile.call(this,e[u],S(e[u],this._getParamName(u),e[u].upload.filename)))};return L};s.prototype.submitRequest=function(e,t,i){return e.send(t)};s.prototype._finished=function(e,t,i){var n,r,o;for(r=0,o=e.length;r<o;r++){n=e[r];n.status=s.SUCCESS;this.emit('success',n,t,i);this.emit('complete',n)};if(this.options.uploadMultiple){this.emit('successmultiple',e,t,i);this.emit('completemultiple',e)};if(this.options.autoProcessQueue){return this.processQueue()}};s.prototype._errorProcessing=function(e,t,i){var n,r,o;for(r=0,o=e.length;r<o;r++){n=e[r];n.status=s.ERROR;this.emit('error',n,t,i);this.emit('complete',n)};if(this.options.uploadMultiple){this.emit('errormultiple',e,t,i);this.emit('completemultiple',e)};if(this.options.autoProcessQueue){return this.processQueue()}};return s})(i);e.version='5.1.1';e.options={};e.optionsForElement=function(t){if(t.getAttribute('id')){return e.options[s(t.getAttribute('id'))]}
else{return void 0}};e.instances=[];e.forElement=function(e){if(typeof e==='string'){e=document.querySelector(e)};if((e!=null?e.dropzone:void 0)==null){throw new Error('No Dropzone found for given element. This is probably because you\'re trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.')};return e.dropzone};e.autoDiscover=!0;e.discover=function(){var r,s,t,i,o,n;if(document.querySelectorAll){t=document.querySelectorAll('.dropzone')}
else{t=[];r=function(e){var r,i,s,n;n=[];for(i=0,s=e.length;i<s;i++){r=e[i];if(/(^| )dropzone($| )/.test(r.className)){n.push(t.push(r))}
else{n.push(void 0)}};return n};r(document.getElementsByTagName('div'));r(document.getElementsByTagName('form'))};n=[];for(i=0,o=t.length;i<o;i++){s=t[i];if(e.optionsForElement(s)!==!1){n.push(new e(s))}
else{n.push(void 0)}};return n};e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];e.isBrowserSupported=function(){var t,i,r,n,s;t=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!('classList' in document.createElement('a'))){t=!1}
else{n=e.blacklistedBrowsers;for(i=0,r=n.length;i<r;i++){s=n[i];if(s.test(navigator.userAgent)){t=!1;continue}}}}
else{t=!1};return t};e.dataURItoBlob=function(e){var s,n,r,o,t,l,i;n=atob(e.split(',')[1]);l=e.split(',')[0].split(':')[1].split(';')[0];s=new ArrayBuffer(n.length);o=new Uint8Array(s);for(r=t=0,i=n.length;0<=i?t<=i:t>=i;r=0<=i?++t:--t){o[r]=n.charCodeAt(r)};return new Blob([s],{type:l})};u=function(e,t){var n,i,s,r;r=[];for(i=0,s=e.length;i<s;i++){n=e[i];if(n!==t){r.push(n)}};return r};s=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};e.createElement=function(e){var t;t=document.createElement('div');t.innerHTML=e;return t.childNodes[0]};e.elementInside=function(e,t){if(e===t){return!0}
while(e=e.parentNode){if(e===t){return!0}};return!1};e.getElement=function(e,t){var i;if(typeof e==='string'){i=document.querySelector(e)}
else if(e.nodeType!=null){i=e};if(i==null){throw new Error('Invalid `'+t+'` option provided. Please provide a CSS selector or a plain HTML element.')};return i};e.getElements=function(e,t){var p,r,i,c,s,o,a,u,l;if(e instanceof Array){i=[];try{for(s=0,a=e.length;s<a;s++){r=e[s];i.push(this.getElement(r,t))}}catch(n){p=n;i=null}}
else if(typeof e==='string'){i=[];l=document.querySelectorAll(e);for(o=0,u=l.length;o<u;o++){r=l[o];i.push(r)}}
else if(e.nodeType!=null){i=[e]};if(!((i!=null)&&i.length)){throw new Error('Invalid `'+t+'` option provided. Please provide a CSS selector, a plain HTML element or a list of those.')};return i};e.confirm=function(e,t,i){if(window.confirm(e)){return t()}
else if(i!=null){return i()}};e.isValidFile=function(e,t){var s,n,o,r,i;if(!t){return!0};t=t.split(',');r=e.type;s=r.replace(/\/.*$/,'');for(n=0,o=t.length;n<o;n++){i=t[n];i=i.trim();if(i.charAt(0)==='.'){if(e.name.toLowerCase().indexOf(i.toLowerCase(),e.name.length-i.length)!==-1){return!0}}
else if(/\/\*$/.test(i)){if(s===i.replace(/\/.*$/,'')){return!0}}
else{if(r===i){return!0}}};return!1};if(typeof jQuery!=='undefined'&&jQuery!==null){jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}};if(typeof module!=='undefined'&&module!==null){module.exports=e}
else{window.Dropzone=e};e.ADDED='added';e.QUEUED='queued';e.ACCEPTED=e.QUEUED;e.UPLOADING='uploading';e.PROCESSING=e.UPLOADING;e.CANCELED='canceled';e.ERROR='error';e.SUCCESS='success';l=function(e){var a,n,s,u,o,i,p,t,l,r;p=e.naturalWidth;i=e.naturalHeight;n=document.createElement('canvas');n.width=1;n.height=i;s=n.getContext('2d');s.drawImage(e,0,0);u=s.getImageData(1,0,1,i).data;r=0;o=i;t=i;while(t>r){a=u[(t-1)*4+3];if(a===0){o=t}
else{r=t};t=(o+r)>>1};l=t/i;if(l===0){return 1}
else{return l}};a=function(e,t,i,n,r,s,o,u,p,c){var a;a=l(t);return e.drawImage(t,i,n,r,s,o,u,p,c/a)};r=(function(){function e(){};e.KEY_STR='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';e.encode64=function(e){var r,t,i,l,a,s,n,o,u;u='';r=void 0;t=void 0;i='';l=void 0;a=void 0;s=void 0;n='';o=0;while(!0){r=e[o++];t=e[o++];i=e[o++];l=r>>2;a=(r&3)<<4|t>>4;s=(t&15)<<2|i>>6;n=i&63;if(isNaN(t)){s=n=64}
else if(isNaN(i)){n=64};u=u+this.KEY_STR.charAt(l)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(n);r=t=i='';l=a=s=n='';if(!(o<e.length)){break}};return u};e.restore=function(e,t){var i,n,r;if(!e.match('data:image/jpeg;base64,')){return t};n=this.decode64(e.replace('data:image/jpeg;base64,',''));r=this.slice2Segments(n);i=this.exifManipulation(t,r);return'data:image/jpeg;base64,'+this.encode64(i)};e.exifManipulation=function(e,t){var i,n,r;n=this.getExifArray(t);r=this.insertExif(e,n);i=new Uint8Array(r);return i};e.getExifArray=function(e){var t,i;t=void 0;i=0;while(i<e.length){t=e[i];if(t[0]===255&t[1]===225){return t};i++};return[]};e.insertExif=function(e,t){var i,s,n,o,l,r;o=e.replace('data:image/jpeg;base64,','');n=this.decode64(o);r=n.indexOf(255,3);l=n.slice(0,r);s=n.slice(r);i=l;i=i.concat(t);i=i.concat(s);return i};e.slice2Segments=function(e){var i,t,r,s,n;t=0;n=[];while(!0){if(e[t]===255&e[t+1]===218){break};if(e[t]===255&e[t+1]===216){t+=2}
else{r=e[t+2]*256+e[t+3];i=t+r+2;s=e.slice(t,i);n.push(s);t=i};if(t>e.length){break}};return n};e.decode64=function(e){var p,n,o,l,a,u,r,t,s,i,c;c='';o=void 0;l=void 0;a='';u=void 0;r=void 0;t=void 0;s='';i=0;n=[];p=/[^A-Za-z0-9\+\/\=]/g;if(p.exec(e)){console.warning('There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, \'+\', \'/\',and \'=\'\nExpect errors in decoding.')};e=e.replace(/[^A-Za-z0-9\+\/\=]/g,'');while(!0){u=this.KEY_STR.indexOf(e.charAt(i++));r=this.KEY_STR.indexOf(e.charAt(i++));t=this.KEY_STR.indexOf(e.charAt(i++));s=this.KEY_STR.indexOf(e.charAt(i++));o=u<<2|r>>4;l=(r&15)<<4|t>>2;a=(t&3)<<6|s;n.push(o);if(t!==64){n.push(l)};if(s!==64){n.push(a)};o=l=a='';u=r=t=s='';if(!(i<e.length)){break}};return n};return e})();o=function(e,t){var s,i,l,n,a,r,c,u,p;l=!1;p=!0;i=e.document;u=i.documentElement;s=(i.addEventListener?'addEventListener':'attachEvent');c=(i.addEventListener?'removeEventListener':'detachEvent');r=(i.addEventListener?'':'on');n=function(s){if(s.type==='readystatechange'&&i.readyState!=='complete'){return}(s.type==='load'?e:i)[c](r+s.type,n,!1);if(!l&&(l=!0)){return t.call(e,s.type||s)}};a=function(){var t,i;try{u.doScroll('left')}catch(e){t=e;setTimeout(a,50);return};return n('poll')};if(i.readyState!=='complete'){if(i.createEventObject&&u.doScroll){try{p=!e.frameElement}catch(o){};if(p){a()}};i[s](r+'DOMContentLoaded',n,!1);i[s](r+'readystatechange',n,!1);return e[s](r+'load',n,!1)}};e._autoDiscoverFunction=function(){if(e.autoDiscover){return e.discover()}};o(window,e._autoDiscoverFunction)}).call(this);
;$.fn.textWidth=function(){var t=$(this).html(),h='<span>'+t+'</span>';$(this).html(h);var i=$(this).find('span:first').width();$(this).html(t);return i};$('.rounded-title').each(function(){var t=$(this).textWidth();$(this).width(t+4);$(this).height(t);$(this).css('margin-top','-'+t/2+'px');$(this).before('<div class="h-line" style="margin-top:'+t/2+'px;"></div>')});
;$('#modal-dialog').dialog({modal:!0,hide:'fade',show:'fade',autoOpen:!1});$('#update-motivations-button').click(function(){var a=$('#motivations-textarea'),t=a.val(),o=parseInt($(this).attr('contract')),i=$('#js-vars').data('vars').ajax_path_update_motivations;$.ajax({url:i,data:{id_contract:o,motivations:t},method:'post',beforeSend:function(){$('#modal-dialog').dialog('open').html('<p>Requête AJAX en cours...</p>')},success:function(a){$('#modal-dialog').html('<p>Réussi</p>')},error:function(){$('#modal-dialog').html('<p>OUPS, erreur imprévue</p>')}})});